{
    "inputs": [
        {
            "type": "MessageGeneratorInput",
            "name": "message_generator" // Defaults to type name if left out
        },
        {
            "type": "LogfileInput",
            "name": "apache_access_log",  // Necessary here cause there'll be more
            "file": "/var/log/apache/access.log"
        },
        {
            "type": "UdpStatInput",
            "bind": "127.0.0.1:2423"
        },         
        {   "type": "TcpInput",
            "address": "127.0.0.1:9125"
        }

    ],
    "decoders": [
        {"type": "JsonDecoder", "encoding_name": "JSON"},
        {"type": "ProtobufDecoder", "encoding_name": "PROTOCOL_BUFFER"} 
    ],
    "filters": [
        {"type": "StatRollupFilter"},
        {
            "type": "NamedOutputFilter",
            "name": "graphite_filter",
            "outputs": ["GraphiteOutput"]
        }
    ],
    "outputs": [
        {
            "type": "GraphiteOutput",
            "host": "192.149.324.132:4233"
        }, 
        {
            "type": "CounterOutput",
            "name": "counter"
        }
    ],
    "chains": {
        "stats": {
            "type": "Counter",
            "filters": ["StatRollupFilter"]
        },
        "stat_dump": {
            "type": "StatMetric",
            "outputs": ["GraphiteOutput"]
        },
        "hekabench": {
            "type": "Counter",
            "message_filter": "Type == \"hekabench\" && EnvVersion == \"0.8\"",
            "outputs": ["counter"]
        },
        "default": {
            "outputs": ["LogFileOutput"]
        }
    }
}
