.. _config_docker_log_input:

DockerLogInput
==============

.. versionadded:: 0.8

The DockerLogInput plugin attaches to all containers running on a host and
sends their logs messages into the Heka pipeline. The plugin is based on
`Logspout <https://github.com/progrium/logspout>`_ by Jeff Lindsay.
Messages will be populated as follows:

- Uuid: Type 4 (random) UUID generated by Heka.
- Timestamp: Time when the log line was received by the plugin.
- Type: `DockerLog`.
- Hostname: Hostname of the machine on which Heka is running.
- Payload: The log line received from a Docker container.
- Logger: `stdout` or `stderr`, depending on source.
- Fields["ContainerID"] (string): The container ID
- Fields["ContainerName"] (string): The container name

Config:

- endpoint (string):
    A Docker endpoint. Defaults to "unix:///var/run/docker.sock".
- decoder (string):
    The name of the decoder used to further transform the message into a
    structured hekad message. No default decoder is specified.

Example:

.. code-block:: ini

	[nginx_log_decoder]
	type = "SandboxDecoder"
	filename = "lua_decoders/nginx_access.lua"

	    [nginx_log_decoder.config]
	    type = "nginx.access"
	    user_agent_transform = true
	    log_format = '$remote_addr - $remote_user [$time_local] "$request" $status $body_bytes_sent "$http_referer" "$http_user_agent"'

    [DockerLogInput]
    decoder = "nginx_log_decoder"
